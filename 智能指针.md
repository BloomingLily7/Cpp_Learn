# 智能指针

## 1.引言

C++ 引入智能指针的主要目的是为了**自动化内存管理**，减少手动 `new` 和 `delete` 带来的复杂性和错误.

在对象生命周期结束时自动释放资源，从而有效防止内存泄漏和资源管理错误.

## 2.原生指针 vs 智能指针

### 原生指针

原生指针存在以下问题：

- **内存泄漏**：未释放动态分配的内存。

  ```c++
  #include <iostream>
  
  void createMemoryLeak() {
      // 在堆上分配内存但从不释放
      int* leakedMemory = new int[100];  // 分配100个int的空间
      
      // 这里使用了分配的内存...
      leakedMemory[0] = 42;
      std::cout << "Value: " << leakedMemory[0] << std::endl;
      
      // 函数结束，指针leakedMemory超出作用域被销毁，
      // 但没有调用delete[]释放内存，导致内存泄漏
  }
  
  int main() {
      createMemoryLeak();
      
      // 现在无法访问或释放createMemoryLeak()中分配的内存
      // 程序每次运行createMemoryLeak()都会泄漏100*sizeof(int)字节
      
      return 0;
  }
  ```

- **悬挂指针**：指针指向已释放或未初始化的内存。
- **双重释放**：多次释放同一内存区域。

### 智能指针的优势

## 3.std::unique_ptr

## 4.std::shared_ptr

## 5.std::weak_ptr

